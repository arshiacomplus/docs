# ✨ راهنمای ساخت نسخه اندروید WarpScanner با Flet و Google Colab ✨

سلام! 👋 این راهنما مثل یه نقشه گنج شما رو قدم به قدم همراهی می‌کنه تا بتونید نسخه اندروید اپلیکیشن **WarpScanner** (با کتابخانه Flet) رو با کمک **Google Colab** بسازید. این روش با Flet خیلی سریع‌تر و راحت‌تر از روش‌های دیگه‌ست. بزن بریم! 🚀

## 🎯 پیش‌نیازها

قبل از شروع، مطمئن بشید این‌ها رو دارید:

*   یک **حساب Google** فعال برای ورود به Colab.
*   کمی آشنایی با محیط **Google Colab** (نگران نباشید، پیچیده نیست!).

## 🗺️ مراحل گام به گام

---

### 1. ورود به Google Colab و آماده‌سازی

*   اول از همه، به سایت [Google Colab](https://colab.research.google.com/) برید و با حساب گوگل‌تون **وارد بشید**.
*   یک **Notebook جدید** بسازید (از منوی File -> New notebook).
*   روی آیکون **پوشه 📂** در نوار کناری سمت چپ کلیک کنید تا بخش مدیریت فایل‌ها باز بشه.

---

### 2. 📥 دانلود فایل‌های پروژه از GitHub

*   تمام فایل‌های لازم برای ساخت نسخه اندروید توی این ریپازیتوری منتظر شما هستن:
    *   **آدرس ریپازیتوری:** [`https://github.com/arshiacomplus/WarpScanner-android-GUI/tree/main/android-flet`](https://github.com/arshiacomplus/WarpScanner-android-GUI/tree/main/android-flet)
*   وارد این آدرس بشید و فایل‌های مهم رو دانلود کنید:
    *   فایل(های) پایتون (`.py`) برنامه
    *   پوشه `assets` با تمام محتویاتش
    *   پوشه `kotlin` با فایل(های) داخلش
    *   فایل `AndroidManifest.xml`

    !!! tip "راه ساده‌تر برای دانلود"
        می‌تونید روی دکمه سبز رنگ Code در صفحه GitHub کلیک کنید و گزینه Download ZIP رو بزنید تا کل پروژه یکجا دانلود بشه. بعد فایل‌های مورد نیاز رو از داخل فایل ZIP استخراج کنید.
---

### 3. 🏗️ ساختار پوشه‌ها و آپلود فایل‌ها در Colab

حالا باید یه خونه مرتب برای فایل‌هامون توی Colab بسازیم:

1.  در پنل Files کولب، پوشه اصلی `WarpScanner` رو بسازید.
2.  داخل پوشه `WarpScanner`، پوشه `src` رو بسازید.
3.  داخل پوشه `src`، پوشه `assets` رو ایجاد کنید.
4.  **محتویات پوشه `assets`** دانلودی رو داخل پوشه `assets` توی Colab آپلود کنید.
5.  **فایل(های) اصلی پایتون** (`.py`) برنامه رو داخل پوشه `WarpScanner` آپلود کنید.
6.  فایل‌های پوشه `kotlin` و `AndroidManifest.xml` دانلود شده رو فعلاً کنار دستتون نگه دارید.

ساختار نهایی باید تقریباً این شکلی باشه:

```
/
└── WarpScanner/
    ├── main.py
    └── src/
        └── assets/
            ├── image1.png
            └── font.ttf
```

---

###  4 & 5. نصب پیش‌نیازها و اجرای بیلد اولیه

حالا وقتشه دستورات اصلی رو اجرا کنیم! **تمام دستورات زیر** رو در یک **سلول کد جدید** در Colab کپی و اجرا کنید:

```bash
# نصب کتابخانه‌های پایتون
!pip install flet icmplib requests retrying flet-permission-handler flet_onesignal

# نصب ابزارهای مورد نیاز سیستم
!sudo apt-get update && sudo apt-get install -y ninja-build

# تنظیمات Git (برای جلوگیری از خطای احتمالی safe.directory)
!git config --global --add safe.directory /root/flutter/3.27.4

# اجرای دستور بیلد Flet (با فرض اینکه از پوشه  اجرا می‌شود)
!flet build apk /WarpScanner -vv
```

!!! note "نکات مهم این مرحله"
    *   نصب پکیج‌ها و اجرای بیلد اول، **مخصوصاً بار اول، ممکن است خیلی طول بکشد** (۱۰ تا ۳۰ دقیقه یا بیشتر). صبور باشید! ☕
    *   دستور `flet build apk /WarpScanner` فرض می‌کند که شما این دستور را از دایرکتوری ریشه اجرا می‌کنید و مسیر کامل پوشه پروژه را به آن می‌دهید.

---

### 6. 🔧 دستکاری فایل‌های بیلد شده

بعد از اینکه بیلد اول تمام شد، باید فایل‌های Kotlin و Manifest را جایگزین کنید:1.  **جایگزینی فایل‌های Kotlin:**    *   توی پنل Files کولب، این مسیر رو دنبال کنید:        `WarpScanner/build/app/src/main/kotlin/`    *   وارد پوشه‌های بعدی بشید تا به فایلی به اسم `MainActivity.kt` برسید (معمولاً داخل پوشه‌هایی مثل `com/example/myapp/` هست).
    *   روی `MainActivity.kt` راست‌کلیک کنید و **Delete** رو بزنید. 🗑️
    *   حالا، **تمام فایل‌های `.kt`** که از پوشه `kotlin` **ریپازیتوری** دانلود کرده بودید رو بکشید و توی همین پوشه در Colab آپلود کنید.

2.  **جایگزینی AndroidManifest.xml:**
    *   به این مسیر برید:
        `WarpScanner/build/app/src/main/`
    *   فایل `AndroidManifest.xml` موجود رو پیدا کنید، راست‌کلیک و **Delete** کنید. 🗑️
    *   فایل `AndroidManifest.xml` که از **ریپازیتوری** دانلود کرده بودید رو اینجا آپلود کنید.

---

### 7. ✅ اجرای دوباره تمام دستورات بیلد

طبق دستور اصلی، حالا باید **تمام دستورات مرحله 4 و 5** را دوباره اجرا کنید تا تغییرات اعمال شوند. دستورات زیر را در یک **سلول کد جدید** کپی و اجرا نمایید:

```bash
# نصب دوباره کتابخانه‌های پایتون (برای اطمینان)
!pip install flet icmplib requests retrying flet-permission-handler flet_onesignal

# نصب دوباره ابزارهای سیستم (معمولاً سریع انجام می‌شود چون نصب شده‌اند)
!sudo apt-get update && sudo apt-get install -y ninja-build

# تنظیم دوباره Git (برای اطمینان)
!git config --global --add safe.directory /root/flutter/3.27.4

# اجرای دوباره دستور بیلد Flet
!flet build apk /WarpScanner -vv
```

!!! info "چرا دوباره همه دستورات؟"
    اجرای مجدد تمام این دستورات (به‌خصوص `pip install` و `apt-get`) شاید همیشه ضروری نباشد، اما طبق درخواست اصلی، برای اطمینان از اینکه همه چیز به‌روز و در جای خود قرار دارد و تغییرات جدید به درستی اعمال می‌شوند، کل فرآیند دوباره تکرار می‌شود. این بار باید سریع‌تر انجام شود.

---

### 8. 🎉 دریافت فایل خروجی APK!

تبریک می‌گم! 🥳 اگه همه‌چی خوب پیش رفته باشه، فایل APK نهایی شما آماده دانلوده:

*   توی پنل Files کولب، به این مسیر برید:
    `/WarpScanner/build/apk/`
*   فایل `app-release.apk` (یا اسم مشابه) رو اونجا پیدا می‌کنید.
*   روی `app-release.apk` راست‌کلیک کنید و گزینه `Download` رو بزنید.

حالا این فایل APK رو به گوشی اندرویدتون منتقل کنید و از اپلیکیشنی که ساختید لذت ببرید! 😉

---
